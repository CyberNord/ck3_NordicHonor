
last_duel_decision = {
	picture = "gfx/interface/illustrations/decisions/nh_decision_duel.dds"
	
	sort_order = 81
	selection_tooltip = last_duel_decision_tooltip
	ai_check_interval = 600

	desc = {
		first_valid = {

			triggered_desc = {
				trigger = { has_trait = cancer}
				desc = last_duel_decision_desc_cancer		
			}
	
			triggered_desc = {
				trigger = { age >= 60 }
				desc = last_duel_decision_desc_old	
			}
			
			triggered_desc = {
				trigger = { religion = religion:germanic_religion }
				desc = last_duel_decision_desc	
			}
		}
	}

	is_shown = {
		OR= {
			AND = {
				age >= 60
				religion = religion:germanic_religion
				triggered_desc = { desc = last_duel_decision_desc_old}
			}
			AND = {
				age >= 18
				religion = religion:germanic_religion
				has_trait = cancer
				triggered_desc = { desc = last_duel_decision_desc_cancer}
			}
		}
	}

	cooldown = { days = 300 }

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_at_war = no
		not = { exists = involved_activity }
	}

	effect = {
		trigger_event = {
			id = nh.0001
			days = {5 10}
		}
	}
	
	ai_potential = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		faith = faith:norse_pagan
	}

	ai_will_do = {
		base = 10

		modifier = {
            add = 70
            has_trait = faith_warrior
        }

		modifier = {
            add = 30
            has_trait = brave
        }

		modifier = {
            add = 15
            has_trait = zealous
        }

		modifier = {
            add = 15
            has_trait = holy_warrior
        }

		modifier = {
            add = 10
            prowess >= 25
        }

		modifier = {
            add = -100
            has_trait = craven
        }
	}
}

nh_rome_hs_decision = {
	picture = "gfx/interface/illustrations/decisions/nh_decision_rome_hs.dds"
	
	desc = nh_rome_hs_decision_desc
	selection_tooltip = nh_rome_hs_decision_tooltip
	major = yes

	sort_order = 0
	
	ai_check_interval = 300

	# only shown if faith is unreformed
	is_shown = {
		is_landed = yes
		OR = {
			faith = faith:norse_pagan
			faith = faith:forn_sidr_pagan
			faith = faith:odinstru_pagan
		}
		NOR = {
			AND = {
				faith = faith:norse_pagan
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:nh_rome_hs_norse_decision
				}
			}
			AND = {
				faith = faith:forn_sidr_pagan
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:nh_rome_hs_forn_sidr_decision
				}
			}
			AND = {
				faith = faith:odinstru_pagan
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:nh_rome_hs_odinstru_decision
				}
			}
		}
	}

	is_valid ={
		highest_held_title_tier >= tier_kingdom
		completely_controls = title:d_latium
		piety_level >= 5
		OR ={
			has_trait = zealous
			has_trait = theologian
			has_trait = holy_warrior
		}
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		is_at_war = no
		not = { exists = involved_activity }
	}

	cost = {
		gold = 1000
		prestige = 5000
		piety = 2000
	}

	effect = {
		trigger_event = {
			id = nh.1001		
		}

		dynasty = {
			add_dynasty_prestige = 1000
		}

		root.faith = { activate_holy_site = joromaborg }

		#Can only happen once per faith
		if = {
			limit = { faith = faith:norse_pagan }
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:nh_rome_hs_norse_decision
			}
		}
		else_if = {
			limit = { faith = faith:forn_sidr_pagan }
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:nh_rome_hs_forn_sidr_decision
			}
		}
		else_if = {
			limit = { faith = faith:odinstru_pagan }
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:nh_rome_hs_odinstru_decision
			}
		}

	}
	
	ai_potential = {always = yes}

	ai_will_do = {base = 100}
}

nh_constantinople_hs_decision = {
	picture = "gfx/interface/illustrations/decisions/nh_decision_constantinople_hs.dds"
	
	desc = nh_constantinople_hs_decision_desc
	selection_tooltip = nh_constantinople_hs_decision_tooltip
	major = yes

	sort_order = 0
	
	ai_check_interval = 300

	# only shown if faith is unreformed
	is_shown = {
		is_landed = yes
		OR = {
			faith = faith:norse_pagan
			faith = faith:heidinn_pagan
			faith = faith:odinstru_pagan
		}
		NOR = {
			AND = {
				faith = faith:norse_pagan
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:nh_constantinople_hs_norse_decision
				}
			}
			AND = {
				faith = faith:heidinn_pagan
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:nh_constantinople_hs_heidinn_decision
				}
			}
			AND = {
				faith = faith:odinstru_pagan
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:nh_constantinople_hs_odinstru_decision
				}
			}
		}
	}

	is_valid ={
		highest_held_title_tier >= tier_kingdom
		completely_controls = title:d_thrace
		piety_level >= 5
		OR ={
			has_trait = zealous
			has_trait = theologian
			has_trait = holy_warrior
		}
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		is_at_war = no
		not = { exists = involved_activity }
	}

	cost = {
		gold = 1000
		prestige = 5000
		piety = 2000
	}

	effect = {
		trigger_event = {
			id = nh.1002		
		}

		dynasty = {
			add_dynasty_prestige = 1000
		}

		root.faith = { activate_holy_site = miklagard }

		#Can only happen once per faith
		if = {
			limit = { faith = faith:norse_pagan }
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:nh_constantinople_hs_norse_decision
			}
		}
		else_if = {
			limit = { faith = faith:heidinn_pagan }
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:nh_constantinople_hs_heidinn_decision
			}
		}
		else_if = {
			limit = { faith = faith:odinstru_pagan }
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:nh_constantinople_hs_odinstru_decision
			}
		}

	}
	
	ai_potential = {always = yes}

	ai_will_do = {base = 100}
}

nh_peace_christianity_decision = {
	picture = "gfx/interface/illustrations/decisions/nh_peace_christianity_decision.dds"
	
	desc = nh_peace_christianity_decision_desc
	selection_tooltip = nh_peace_christianity_decision_tooltip
	major = yes

	sort_order = 0
	
	ai_check_interval = 300

	# only shown if faith is unreformed
	is_shown = {
		is_landed = yes	
		faith = faith:natturugudtruar_pagan
		
		#Not repeatable.
		NOT = {
			AND = {
				faith = faith:natturugudtruar_pagan
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:nh_peace_christianity_decision
				}	
			}
		}
	}

	is_valid ={
		highest_held_title_tier >= tier_kingdom

		# unreformed
		faith = faith:natturugudtruar_pagan

		# strong faith
		piety_level >= 5
		faith = { holy_sites_controlled = 3 }

		#Must be in/adjacent to the Viking Age.
		NOT = {
			culture = { has_cultural_era_or_later = culture_era_high_medieval }
		}
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		is_at_war = no
		not = { exists = involved_activity }
	}

	cost = {
		prestige = 5000
		piety = 5000
	}

	effect = {
		trigger_event = {
			id = nh.1003		
		}

		dynasty = {
			add_dynasty_prestige = 1000
		}


		#Can only happen once 
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:nh_peace_christianity_decision
		}	
	}

	ai_potential = {always = yes}

	ai_will_do = {base = 100}
}

nh_convert_whole_realm_to_feudalism_decision = {
	picture = "gfx/interface/illustrations/decisions/nh_pagan_feudalize.dds"
	major = yes
	desc = nh_convert_whole_realm_to_feudalism_decision_desc

	ai_check_interval = 36

	is_shown = {
		AND ={
			government_has_flag = government_is_tribal
			faith = { has_doctrine_parameter = unreformed }
		}
		OR = {
			culture = { has_cultural_pillar = heritage_central_germanic }
			culture = { has_cultural_pillar = heritage_west_germanic }
			culture = { has_cultural_pillar = heritage_north_germanic }
		}
		OR = {
			is_independent_ruler = yes
			AND = {
				is_independent_ruler = no
				liege = {
					NOR = {
						government_has_flag = government_is_feudal
						government_has_flag = government_is_clan
					}
				}
			}
		}
	}

	is_valid = {
		has_realm_law = tribal_authority_3
		custom_description = {
			text = nh_faith_is_unreformed
			subject = root
			faith = { has_doctrine_parameter = unreformed }
		}
		prestige_level >= 5
		capital_province.county = {
			development_level >= nh_convert_to_feudalism_development_requirement
		}

		custom_description = { #You need to have 85% of all (non-regional/unique) tribal innovations!
			text = nh_has_all_tribal_innovation
			subject = root.culture
			culture = {
				calc_true_if = {
					amount >= 12
					has_innovation = innovation_motte
					has_innovation = innovation_catapult
					has_innovation = innovation_barracks
					has_innovation = innovation_mustering_grounds
					has_innovation = innovation_bannus
					has_innovation = innovation_quilted_armor
					has_innovation = innovation_gavelkind
					has_innovation = innovation_crop_rotation
					has_innovation = innovation_city_planning
					has_innovation = innovation_casus_belli
					has_innovation = innovation_plenary_assemblies
					has_innovation = innovation_ledger
					has_innovation = innovation_development_01
					has_innovation = innovation_currency_01
				}
			}
		}
	}

	cost = {
		prestige = 8000
	}

	effect = {
		trigger_event = major_decisions.0001
		save_scope_as = actor
		convert_whole_realm_to_feudalism_effect = yes
		hidden_effect = {
			every_vassal = {
				trigger_event = {
					id = major_decisions.0002
					days = 3
				}
			}
		}
	}

	ai_potential = {
		NOT = { has_title = title:e_mongol_empire } #Stop the Mongols from slowing their conquest.
	}

	ai_will_do = {
		base = 100
	}
}

nh_convert_to_christianity_iceland_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
	major = yes
	desc = nh_convert_to_christianity_iceland_decision_desc
	selection_tooltip = nh_convert_to_christianity_iceland_decision_tooltip

	ai_check_interval = 6

	is_shown = {
		is_lowborn = no
		OR = {
     		faith = faith:ginnregla_pagan
     		faith = faith:norse_pagan
		}
		NAND = {
			AND = {
				exists = character:168609
				this = character:168609
			}
			AND = {
				exists = character:180257
				this = character:180257
			}
		}

		#Not repeatable.
		NOR = {
			AND = {
				this = character:168609
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:nh_convert_to_christianity_iceland_fletnefir_decision
				}
			}	
			AND = {
				this = character:180257
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:nh_convert_to_christianity_iceland_svarson_decision
				}
			}
		}
	}

	is_valid = {
		has_realm_law = tribal_authority_2
		custom_description = {
			text = nh_faith_is_unreformed
			subject = root
			faith = { has_doctrine_parameter = unreformed }
		}
	}

	cost = { prestige = 500 }

	effect = {
		trigger_event = nh.1004
		save_scope_as = actor

		dynasty = {
			add_dynasty_prestige = 250
		}
		
		if = {
			limit = { this = character:168609 }
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:nh_convert_to_christianity_iceland_fletnefir_decision
			}
		}
		else_if = {
			limit = { this = character:180257 }
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:nh_convert_to_christianity_iceland_svarson_decision
			}
		}
	}

	ai_potential = { always = yes }

	ai_will_do = {
		base = 100
	}
}

